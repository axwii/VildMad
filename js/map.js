// Importerer konfigurationsdata fra en ekstern fil (config.js)
import config from "./config.js";

// Henter API-nøglen fra konfigurationsdataene
const apiKey = config.apiKey;

// Opretter et script-element for at indlæse Google Maps JavaScript API med den angivne API-nøgle
const script = document.createElement("script");
script.src = `https://maps.googleapis.com/maps/api/js?key=${apiKey}&libraries=maps,marker&v=beta`;
script.async = true;
document.head.appendChild(script);

// Henter reference til det HTML-element med attributtet 'map-id' sat til "mapID"
const mapElement = document.querySelector('gmp-map[map-id="mapID"]');

// Array med koordinatdata for forskellige placeringer
const data = [
  ["5290", "2021-05-25 16:49:30", "55.55184173583984", "9.80667591094971", "339", "4"],
  ["5282", "2021-05-20 14:02:08", "55.40375518798828", "10.40237045288086", "255", "4"],
  ["5309", "2021-06-02 14:51:35", "55.65287399291992", "12.53263664245605", "255", "5"],
  ["5293", "2021-05-25 16:50:18", "55.55187988281250", "9.80673313140869", "255", "4"],
  ["5295", "2021-05-25 16:50:45", "55.55151748657227", "9.80634593963623", "255", "4"],
  ["5297", "2021-05-25 18:27:38", "-8.66510868072510", "115.15554046630860", "307", "4"],
  ["5298", "2021-05-25 18:32:04", "-8.66510868072510", "115.15554046630860", "351", "4"],
  ["5299", "2021-05-25 18:33:11", "55.40375518798828", "10.40237045288086", "255", "4"],
  ["5300", "2021-05-26 08:55:29", "55.66845703125000", "12.57393836975098", "307", "4"],
  ["5281", "2021-05-20 12:09:19", "55.686447", "12.570799", "255", "4"],
  ["5282", "2021-05-20 14:02:08", "55.680358", "12.586800", "255", "4"],
  ["5283", "2021-05-20 14:02:37", "55.705577", "12.529397", "255", "4"],
  ["5284", "2021-05-20 14:04:04", "55.691672", "12.565217", "255", "4"],
  ["5285", "2021-05-20 14:04:17", "55.667433", "12.536812", "255", "4"],
  ["5286", "2021-05-25 16:49:13", "55.676547", "12.572607", "339", "4"],
  ["5287", "2021-05-25 16:49:18", "55.688992", "12.573239", "339", "4"],
  ["5288", "2021-05-25 16:49:21", "55.673128", "12.564676", "339", "4"],
  ["5289", "2021-05-25 16:49:25", "55.696934", "12.564157", "339", "4"],
  ["5290", "2021-05-25 16:49:30", "55.694840", "12.558465", "339", "4"],
  ["5291", "2021-05-25 16:49:41", "55.686141", "12.561025", "339", "4"],
  ["5292", "2021-05-25 16:50:08", "55.680249", "12.569873", "255", "4"],
  ["5293", "2021-05-25 16:50:18", "55.694466", "12.570769", "255", "4"],
  ["5294", "2021-05-25 16:50:22", "55.695647", "12.577369", "255", "4"],
  ["5295", "2021-05-25 16:50:45", "55.687091", "12.573932", "255", "4"],
  ["5297", "2021-05-25 18:27:38", "55.675856", "12.564427", "307", "4"],
  ["5298", "2021-05-25 18:32:04", "55.694328", "12.567935", "351", "4"],
  ["5299", "2021-05-25 18:33:11", "55.682766", "12.556070", "255", "4"],
  ["5300", "2021-05-26 08:55:29", "55.680905", "12.571550", "307", "4"],
  ["5303", "2021-06-02 14:44:42", "55.688318", "12.577765", "255", "5"],
  ["5304", "2021-06-02 14:45:17", "55.688836", "12.564864", "255", "5"],
  ["5305", "2021-06-02 14:47:23", "55.683553", "12.569529", "255", "5"],
  ["5306", "2021-06-02 14:49:00", "55.690901", "12.564776", "255", "5"],
  ["5307", "2021-06-02 14:49:44", "55.679787", "12.576332", "255", "5"],
  ["5308", "2021-06-02 14:51:08", "55.685214", "12.574768", "255", "5"],
  ["5309", "2021-06-02 14:51:35", "55.689984", "12.578240", "255", "5"],
  ["5310", "2021-06-02 14:52:03", "55.690079", "12.554695", "255", "5"],
  ["5311", "2021-06-02 14:52:15", "55.686931", "12.569508", "255", "5"],
  ["5312", "2021-06-02 14:53:06", "55.685973", "12.570437", "255", "5"],
  ["5313", "2021-06-02 14:53:34", "55.687685", "12.561907", "255", "5"],
  ["5314", "2021-06-02 15:07:15", "55.692265", "12.566463", "255", "5"],
  ["5315", "2021-06-02 15:10:15", "55.684724", "12.575208", "255", "5"],
  ["5316", "2021-06-02 15:12:20", "55.683117", "12.576256", "255", "5"],
  ["5317", "2021-06-02 15:14:15", "55.689581", "12.563954", "255", "5"],
  ["5318", "2021-06-02 15:14:28", "55.695074", "12.572347", "255", "5"],
  ["5319", "2021-06-02 15:17:38", "55.686001", "12.568537", "255", "5"],
  ["5320", "2021-06-02 15:18:14", "55.679192", "12.557986", "255", "5"],
  ["5321", "2021-06-02 15:18:21", "55.684359", "12.558345", "255", "5"],
  ["5322", "2021-06-02 15:18:32", "55.695399", "12.572871", "255", "5"],
  ["5323", "2021-06-02 15:18:41", "55.684024", "12.557160", "255", "5"],
  // ... (tilføj resten af data)
];

// Itererer gennem hvert element i data-arrayet
for (var i = 0; i < data.length; i++) {
  var values = data[i];
  var latitude = parseFloat(values[2]);
  var longitude = parseFloat(values[3]);
  var locationName = "Placering " + values[0];

  // Tjekker om bredde- og længdegrader er gyldige tal
  if (!isNaN(latitude) && !isNaN(longitude)) {
    // Opretter en avanceret markør (gmp-advanced-marker)
    var advancedMarker = document.createElement("gmp-advanced-marker");
    advancedMarker.setAttribute("position", latitude + "," + longitude);
    advancedMarker.setAttribute("title", locationName);
    console.log(advancedMarker);

    // Tilføjer den avancerede markør til kortet
    mapElement.appendChild(advancedMarker);
  }
}